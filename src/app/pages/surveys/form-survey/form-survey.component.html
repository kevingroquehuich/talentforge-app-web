<main id="main">
  <app-breadcrumbs />

  <section class="services">
    <div class="container" >

      <div class="section-title">
        <h2>Formulario de encuesta</h2>
        <p>{{ survey.name }}</p>
      </div>

      <div class="row">
        <div class="col-xs-12 col-lg-offset-3 col-lg-6">
          <form id="survey-form" name="survey-form" [formGroup]="surveyForm" (ngSubmit)="onSubmit()">
            <fieldset>
              <label for="name" id="name-label" class="labels">
                Nombres Completos *
                <input formControlName="name" class="" type="text" id="name" name="name" placeholder="Enter your name (required)" required />
              </label>
            </fieldset>
            <fieldset>
              <label for="email" id="email-label" class="labels">
                Email *
                <input formControlName="email" class="" type="email" id="email" name="email" placeholder="Enter your email (required)"
                  required />
              </label>
            </fieldset>
            <fieldset>
              <label for="number" id="number-label" class="labels">
                Edad *
                <input formControlName="age" class="" type="number" id="number" name="number" min="8" max="112"
                  placeholder="Enter you age (required)" required />
              </label>
            </fieldset>
            <fieldset>
              <label for="dropdown" class="labels">
                Género *
                <select formControlName="gender" id="dropdown" name="dropdown" class="m-t-xs">
                  <option value="male" selected>Masculino</option>
                  <option value="female">Femenino</option>
                  <option value="notSaying">Prefiero no decirlo</option>
                  <option value="other">Otro</option>
                </select>
              </label>
            </fieldset>

            <fieldset>
              <label for="dropdown" class="labels">
                Categoría de puesto*
                <select formControlName="jobCategory" id="dropdown" name="dropdown" class="m-t-xs">
                  <option value="Directivos" selected>Directivos</option>
                  <option value="Mando medio">Mando medio</option>
                  <option value="Supervisión, profesionales y técnicos">Supervisión, profesionales y técnicos</option>
                  <option value="Operativos y de apoyo">Operativos y de apoyo</option>
                  <option value="Otros">Otros</option>
                </select>
              </label>
            </fieldset>

            <ng-container formArrayName="questions">

              @for (question of questionsFormArray.controls; track question; let index = $index) {
                 <fieldset class="question" [formGroupName]="index">
                  <div class="labels">
                      {{ questionsWithOptions[index].order }}. {{ questionsWithOptions[index].statement }} *
                  </div>

                  <div class="radio-tile-group">
                      @for (option of questionsWithOptions[index].options; track option) {
                              <div class="input-container">
                                  <input
                                      type="radio" 
                                      class="radio-button"
                                      formControlName="answer"
                                      [id]="option.id"  
                                      [value]="option">
                                   <div class="radio-tile">
                                    <div class="icon walk-icon">
                                      <label for="walk" class="radio-tile-label">{{ option.value }}</label>
                                    </div>
                                   </div>
                              </div>    
                      }
              
                  </div>
              </fieldset>
              }
            </ng-container>
            

            <button id="submit" type="submit" class="btn">Enviar Formulario</button>
          </form>
        </div>
      </div>

    </div>
  </section>

</main>